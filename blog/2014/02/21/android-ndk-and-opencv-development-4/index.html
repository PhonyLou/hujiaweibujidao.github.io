
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>android ndk and opencv development 4 - Hujiawei Bujidao</title>
  <meta name="author" content="hujiawei">

  
  <meta name="description" content="Android NDK与OpenCV的整合开发环境搭建 以XFace项目为例，虚拟机的操作系统为64位的Ubuntu 12.04，用户名和密码都是xface 第一部分 搭建环境 [注：以下所有下载的sdk工具都保存在虚拟机的/home/xface/tools目录下， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://hujiaweibujidao.github.io/blog/2014/02/21/android-ndk-and-opencv-development-4">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Hujiawei Bujidao" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
	<header role="banner">
		<hgroup style="text-align: center">
	<h1><a href="/"><img src="/images/conan-paper.png"  />Hujiawei Bujidao<img src="/images/conan-hat.png"  /></a></h1>
	
	<h2>I will always be your savior! A secret makes a man man!</h2>
	
</hgroup>


	</header>
	<nav role="navigation">
		<ul class="subscription" data-subscription="rss">

  <!-- <li><a href="https://github.com/hujiaweibujidao" rel="subscribe-rss" title="subscribe via RSS">View me on GitHub</a></li> -->
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
   
</ul>

  <!--
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:hujiaweibujidao.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form> 
  
  -->
<ul class="main-navigation">
  <li><a href="/blog/archives/">Blog</a></li>
  <li><a href="/aboutme/">AboutMe</a></li>
  <li><a href="/math/">Math</a></li>
  <li><a href="/datamining/">DataMining</a></li>
  <li><a href="/blog/categories/mobiledev/">MobileDev</a></li>
  <li><a href="/xjava/">XJava</a></li>
  <!-- <li><a href="/datamining/">Projects</a></li> -->
  <!--
  <li><a href="/blog/archives">Archives</a></li>
  -->
</ul>


	</nav>
	<div id="main">
		<div id="content">
			<div>
	<article class="hentry" role="article">
		
  <header>
    
      <h1 class="entry-title">Android Ndk and Opencv Development 4</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-21T10:15:00+08:00" pubdate data-updated="true">Feb 21<span>st</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><h4>Android NDK与OpenCV的整合开发环境搭建</h4>

<p>以XFace项目为例，虚拟机的操作系统为64位的Ubuntu 12.04，用户名和密码都是xface</p>

<h5>第一部分 搭建环境</h5>

<hr />

<p><strong><em>[注：以下所有下载的sdk工具都保存在虚拟机的<code>/home/xface/tools</code>目录下，也可以到我共享的百度网盘中直接下载，地址是<a href="http://pan.baidu.com/s/1mg3BSZQ">http://pan.baidu.com/s/1mg3BSZQ</a>]</em></strong></p>

<p>1.配置Java环境</p>

<p>①下载<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Oracle JDK</a>，虚拟机中下载的版本是JDK1.7.0_40，保存在<code>/home/xface/tools</code>目录下</p>

<p>②下载之后解压即可，解压路径为<code>/home/xface/android/jdk1.7.0</code></p>

<p>③打开终端，输入<code>sudo gedit /etc/profile</code>，在文件末尾添加下面内容</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>JAVA_HOME=/home/xface/android/jdk1.7.0
</span><span class='line'>export PATH=$JAVA_HOME/bin:$PATH</span></code></pre></td></tr></table></div></figure>


<p>④重启虚拟机，打开终端输入<code>java -version</code>进行测试</p>

<p><img src="/images/201402/javaversion.png"></p>

<p>2.配置Android SDK环境</p>

<p>①下载<a href="https://developer.android.com/sdk/index.html">Android Developer Tools</a>，虚拟机中下载的是20130729版本，保存在<code>/home/xface/tools</code>目录下</p>

<p>②下载之后解压即可，解压路径为<code>/home/xface/android/adt-bundle</code></p>

<p>③打开终端，输入<code>sudo gedit /etc/profile</code>，在文件末尾添加下面内容</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ANDROID_SDK_ROOT=/home/xface/android/adt-bundle/sdk
</span><span class='line'>export PATH=${PATH}:${ANDROID_SDK_ROOT}/platform-tools:${ANDROID_SDK_ROOT}/tools</span></code></pre></td></tr></table></div></figure>


<p>④因为Android SDK是32位的，而Ubuntu系统是64位的，需要添加ia32-libs库，在终端中执行下面命令</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get update
</span><span class='line'>sudo apt-get install ia32-libs</span></code></pre></td></tr></table></div></figure>


<p>⑤重启虚拟机，打开终端输入<code>adb version</code>进行测试</p>

<p><img src="/images/201402/adbversion.png"></p>

<p>3.配置Android NDK环境</p>

<p>①下载<a href="https://developer.android.com/tools/sdk/ndk/index.html">Android NDK</a>，虚拟机中下载的是r9c版本，保存在<code>/home/xface/tools</code>目录下</p>

<p>②下载之后解压即可，解压路径为<code>/home/xface/android/adt-bundle/ndk</code></p>

<p>③打开终端，输入<code>sudo gedit /etc/profile</code>，在文件末尾添加下面内容</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ANDROID_NDK_ROOT=/home/xface/android/adt-bundle/ndk
</span><span class='line'>export PATH=${PATH}:${ANDROID_NDK_ROOT}</span></code></pre></td></tr></table></div></figure>


<p>④重启虚拟机，打开终端输入<code>ndk-build -v</code>进行测试</p>

<p><img src="/images/201402/ndkversion.png"></p>

<p>4.配置OpenCV环境</p>

<p>①下载<a href="http://sourceforge.net/projects/opencvlibrary/files/opencv-android/">OpenCV for Android</a>，虚拟机中使用的是2.4.4版本，保存在<code>/home/xface/tools</code>目录下</p>

<p>②下载之后解压即可，解压路径为<code>/home/xface/android/opencv_sdk</code></p>

<p>5.配置ADT开发环境</p>

<p>①运行<code>%adt-bundle%/eclipse</code>目录中的eclipse程序，设置默认的工作空间，虚拟机中设置的路径为<code>/home/xface/android/workspace</code></p>

<p>②打开<code>window-&gt;preferences</code>，查看Android SDK和NDK的配置，如果路径有问题则需要修改过来</p>

<p>③打开<code>window-&gt;preferences</code>，找到左侧的<code>C/C++ Build-&gt;Environment</code>添加下面两个环境变量：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>NDKROOT=/home/xface/android/adt-bundle/ndk
</span><span class='line'>OPENCVROOT=/home/xface/android/opencv_sdk</span></code></pre></td></tr></table></div></figure>


<p>④为了提高编写代码的速度，打开<code>window-&gt;preferences</code>，找到左侧<code>Java-&gt;Editor-&gt;Content Assist</code>，在<code>Auto activation triggers for Java</code>中添加26个英文字母，这样，在编写Java代码时任何一个字母被按下的话都会出现智能代码提示。</p>

<p><strong><em>[注1：以上重启虚拟机的步骤可以合成一次进行，即先配置所有内容然后重启一次即可]</em></strong></p>

<p><strong><em>[注2：为了验证环境没有问题，可以尝试新建一个Android Project并运行于移动设备上]</em></strong></p>

<h5>第二部分 运行XFace</h5>

<hr />

<p>第一种方式是使用Git方式获取源代码然后运行</p>

<p>1.运行Eclipse，在<code>window-&gt;view</code>中找到并打开<code>Git Repositories</code>视图，然后选择<code>clone a git repository</code>，在弹出的窗口中输入下面的内容 (注：下面内容是我在GitHub上的一个项目，可以选择fork一份项目或者我添加teamworker)</p>

<p><img src="/images/201402/gitclone.png"></p>

<p>2.在得到的XFace Git Repository的<code>Working Directory</code>中便可以看到XFace项目现有的所有源码，首先导出项目<code>OpenCV Library-2.4.4</code>，如果提示<code>Unable to resolve target 'android-17'</code>则只要修改修改项目属性中的Android Platform的版本为系统中已安装的版本，例如4.3。然后导出项目XFace，它是当前XFace项目最新的源码，项目导入之后会自动进行一次编译，如果编译成功则表示环境没有问题。</p>

<p>第二种方式是直接下载源码然后导入到Eclipse中</p>

<p>下载地址是：<a href="https://github.com/hujiaweibujidao/XFace.git">https://github.com/hujiaweibujidao/XFace.git</a></p>

<p>导入项目以及导入之后的配置和第一种方式差不多</p>

<h5>第三部分 参考内容</h5>

<hr />

<p>其他的参考内容：</p>

<p>①<a href="http://bujingyun23.blog.163.com/blog/static/181310243201210293950303/?suggestedreading&amp;wumii">关于在Ubuntu12.04下搭建android开发环境的教程</a></p>

<p>②<a href="http://hujiaweiyinger.diandian.com/post/2013-10-30/setup_android_ndk_environment_and_solve_some_problems">关于在windows平台搭建android开发环境的教程</a></p>

<p>【不推荐使用Windows进行开发】</p>

<p>③<a href="http://hujiaweibujidao.github.io/blog/2013/11/18/android-ndk-and-opencv-developement/">关于android ndk和opencv整合开发以及实例项目运行的教程</a></p>

<p>④<a href="http://hujiaweibujidao.github.io/blog/2013/11/18/android-ndk-and-opencv-development-2/">关于android ndk开发中的各种细节和问题的总结</a></p>

<p class='post-footer'>
                        Original link:<a href='http://hujiaweibujidao.github.io/blog/2014/02/21/android-ndk-and-opencv-development-4/'>http://hujiaweibujidao.github.io/blog/2014/02/21/android-ndk-and-opencv-development-4/</a><br/>Written by <a href='http://hujiaweibujidao.github.io'>hujiawei</a>&nbsp;Posted at <a href='http://hujiaweibujidao.github.io'>http://hujiaweibujidao.github.io</a><br/>Feel free to read or comment it, and if you want to copy it into your own site, please copy it with its Original Link showed above or you can see the license below for more details.<br />Thanks a lot. Hope you enjoy here! ^_^</p>

</div>


		<footer>
			<p class="meta">
				
  

<span class="byline author vcard">Posted by <span class="fn">hujiawei</span></span>

				








  


<time datetime="2014-02-21T10:15:00+08:00" pubdate data-updated="true">Feb 21<span>st</span>, 2014</time>
				

<span class="categories">
  
    <a class='category' href='/blog/categories/android/'>android</a>, <a class='category' href='/blog/categories/mobiledev/'>mobiledev</a>, <a class='category' href='/blog/categories/opencv/'>opencv</a>
  
</span>


			</p>
			
			<div class="sharing">
  
  
  
</div>

			
			<p class="meta">
				
				<a class="basic-alignment left" href="/blog/2013/12/14/yi-dong-kai-fa-zi-liao-hui-ji/" title="Previous Post: 移动开发资料汇集">&laquo; 移动开发资料汇集</a>
				
				
			</p>
		</footer>
	</article>
	

	
	<section>
		<h1>Comments</h1>
		<div id="comments" aria-live="polite">
			<!-- Duoshuo Comment BEGIN   data-title=""-->
<div class="ds-thread"></div>
<script type="text/javascript">
  var duoshuoQuery = {short_name:"hujiaweibujidao"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>
<!-- Duoshuo Comment END -->

		</div>
	</section>
	

</div>

<aside class="sidebar">
	
	<section>
  <h1>关于博主</h1><br/>
  <a href="/aboutme/"><img src="/images/me-small.png" width="250px" height="210px" alt="protrait"/></a><br/>
  <p>Hi, I'm Hujiawei, from P.R.China. Now I'm a postgraduate student studying in <a href="http://www.tsinghua.edu.cn/publish/th/index.html">Tsinghua University</a>.
  Wanna know me? <a href="/aboutme/">See here.</a> <br/>	
  </p>
  <a href="http://weibo.com/hujiaweiyinger"><img src="/images/sinaweibo.png" width="40px" height="40px"/></a> &nbsp;
  <a href="https://github.com/hujiaweibujidao"><img src="/images/github.png" width="40px" height="40px"/></a>&nbsp;
  <a href="http://hujiawei.tumblr.com"><img src="/images/tumblr.png" width="40px" height="40px"/></a> &nbsp;
  <a href="https://twitter.com/hujiaweiyinger"><img src="/images/twitter.png" width="40px" height="40px"/></a>
  
  <br/>
  
</section>
<section>
 <h1>分类目录</h1>
 <ul id="categories">
	 <li class='category'><a href='/blog/categories/android/'>android (5)</a></li>
<li class='category'><a href='/blog/categories/ios/'>ios (1)</a></li>
<li class='category'><a href='/blog/categories/mobiledev/'>mobiledev (5)</a></li>
<li class='category'><a href='/blog/categories/octopress/'>octopress (2)</a></li>
<li class='category'><a href='/blog/categories/opencv/'>opencv (4)</a></li>

 </ul>
</section>
<section>
  <h1>近期文章</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/02/21/android-ndk-and-opencv-development-4/">Android Ndk and Opencv Development 4</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/14/yi-dong-kai-fa-zi-liao-hui-ji/">移动开发资料汇集</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/18/android-ndk-and-opencv-development-3/">Android Ndk and Opencv Development 3</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/18/android-ndk-and-opencv-development-2/">Android Ndk and Opencv Development 2</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/18/android-ndk-and-opencv-developement/">Android Ndk and Opencv Developement</a>
      </li>
    
  </ul>
</section>
<section>
	<h1>好友博客</h1>
	<ul>
		<li>
			<a href="http://doufunao.github.io/">豆腐脑的幻想乡</a>
		</li>
		<li>
			<a href="http://c4fun.cn/">Code 4 Fun</a>
		</li>
		<li>
			<a href="http://www.tanglei.name/">tanglei的blog</a>
		</li>
		<li>
			<a href="http://ontheroad.sinaapp.com/">Find My Way</a>
		</li>
		
		<li>
			<a href="http://www.liaoxuefeng.com/">廖雪峰的官方网站</a>
		</li>
		<li>
			<a href="http://easypi.github.io/">easypi's blog</a>
		</li>
		<li>
			<a href="http://812lcl.github.io/">812lcl的博客</a>
		</li>
		<li>
			<a href="http://wufawei.com/">Ted's Homepage</a>
		</li>
		<li>
			<a href="#">这里会是你吗?</a>
		</li>
	</ul>
</section>
	
</aside>



		</div>
	</div>
	
	<footer role="contentinfo">
		<p>
	Copyright &copy; 2014 - hujiawei - <a href="http://happybirthday2yinger.duapp.com/">Happy birthday to MY QUEEN</a> - <span class="credit">Proudly Powered by <a href="http://octopress.org">Octopress</a></span>
	<!-- CNZZ -->
	&nbsp;&nbsp;
	<script type="text/javascript">
		var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
		document.write(unescape("%3Cspan id='cnzz_stat_icon_1000165127'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s22.cnzz.com/z_stat.php%3Fid%3D1000165127%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<!-- license -->
	<a rel="license" href="http://creativecommons.org/licenses/by-nd/3.0/deed.zh"><img alt="知识共享许可协议" style="border-width:0" src="http://i.creativecommons.org/l/by-nd/3.0/88x31.png" /></a>
	<br />
	本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nd/3.0/deed.zh">知识共享署名-禁止演绎 3.0 未本地化版本许可协议</a>进行许可。
</p>
<style>
	.returnTop {
		position: fixed;
		_position: absolute;
		right: 10px;
		bottom: 200px;
		_bottom: auto;
		display: none;
		width: 40px;
		height: 40px;
		border: 1px solid #61b72e;
		border-radius: 4px;
		background: #fff;
		box-shadow: 0 0 5px #F5F5F5;
		text-indent: -9999px;
		cursor: pointer;
	}
	.returnTop .s {
		position: absolute;
		top: -2px;
		_top: -20px;
		left: 10px;
		width: 0;
		height: 0;
		border-width: 10px;
		border-color: transparent transparent #61b72e;
		border-style: dashed dashed solid;
	}
	.returnTop .b {
		position: absolute;
		top: 18px;
		left: 16px;
		height: 12px;
		width: 8px;
		background: #61b72e;
	}
</style>
<div class="returnTop" title="嗖的就上去了！">
	<span class="s"></span>
	<span class="b"></span>
	返回顶部
</div>
<script type="text/javascript">
$(function(){
$(window).bind("scroll", function(){

var scrollTopNum = $(document).scrollTop(),
winHeight = $(window).height(),
returnTop = $("div.returnTop");

(scrollTopNum > 0) ? returnTop.fadeIn("fast") : returnTop.fadeOut("fast");

if (!-[1,]&&!window.XMLHttpRequest) {
returnTop.css("top", scrollTopNum + winHeight - 200);
}

});

$("div.returnTop").click(function() {
$("html, body").animate({ scrollTop: 0 }, 100);
});

});
</script>



	</footer>
	
	











</body>
</html>
